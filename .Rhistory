newdata <- newdata[1:len2007,]
View(newdata)
for(icol in 1:length(data2007)){
newdata$年份[icol] <- unlist(strsplit(as.character(scw1$年份[icol]),'\\.'))[1]
}
View(newdata)
len2007 <- length(data2007)
data2007 <- grep("2007",scw1$年份,value = TRUE)
newdata <- data.frame(scw1)
for(icol in 1:length(data2007)){
newdata[icol,] <- scw1[scw1$年份 == grep("2007",scw1$年份,value = TRUE)[icol],]
}
newdata <- newdata[1:len2007,]
View(newdata)
newdata <- list(newdata)
for(icol in 1:length(data2007)){
newdata$年份[icol] <- unlist(strsplit(as.character(scw1$年份[icol]),'\\.'))[1]
}
newdata
len2007 <- length(data2007)
data2007 <- grep("2007",scw1$年份,value = TRUE)
newdata <- data.frame(scw1)
for(icol in 1:length(data2007)){
newdata[icol,] <- scw1[scw1$年份 == grep("2007",scw1$年份,value = TRUE)[icol],]
}
newdata <- newdata[1:len2007,]
newdata <- list(newdata)
for(icol in 1:length(data2007)){
newdata[icol,3] <- unlist(strsplit(as.character(scw1$年份[icol]),'\\.'))[1]
}
newdata
newdata[1]
newdata[1][1]
newdata[[1]]
len2007 <- length(data2007)
data2007 <- grep("2007",scw1$年份,value = TRUE)
newdata <- data.frame(scw1)
for(icol in 1:length(data2007)){
newdata[icol,] <- scw1[scw1$年份 == grep("2007",scw1$年份,value = TRUE)[icol],]
}
newdata <- newdata[1:len2007,]
newdata <- data.frame(newdata)
for(icol in 1:length(data2007)){
newdata[icol,3] <- unlist(strsplit(as.character(scw1$年份[icol]),'\\.'))[1]
}
View(newdata)
newdata$证券代码[1]
len2007 <- length(data2007)
data2007 <- grep("2007",scw1$年份,value = TRUE)
newdata <- data.frame(scw1)
for(icol in 1:length(data2007)){
newdata[icol,] <- scw1[scw1$年份 == grep("2007",scw1$年份,value = TRUE)[icol],]
}
newdata <- newdata[1:len2007,]
newdata <- data.frame(newdata,as.is = TRUE)
for(icol in 1:length(data2007)){
newdata[icol,3] <- unlist(strsplit(as.character(data2007$年份[icol]),'\\.'))[1]
}
View(newdata)
newdata <- data.frame(newdata,stringsAsFactors = FALSE)
for(icol in 1:length(data2007)){
newdata[icol,3] <- unlist(strsplit(as.character(data2007$年份[icol]),'\\.'))[1]
}
for(icol in 1:length(data2007)){
newdata[icol,3] <- unlist(strsplit(as.character(newdata$年份[icol]),'\\.'))[1]
}
View(newdata)
len2007 <- length(data2007)
data2007 <- grep("2007",scw1$年份,value = TRUE)
newdata <- data.frame(scw1,newdata,stringsAsFactors = FALSE)
for(icol in 1:length(data2007)){
newdata[icol,] <- scw1[scw1$年份 == grep("2007",scw1$年份,value = TRUE)[icol],]
}
newdata <- newdata[1:len2007,]
View(newdata)
newdata$年份[1]
len2007 <- length(data2007)
data2007 <- grep("2007",scw1$年份,value = TRUE)
newdata <- data.frame(scw1,stringsAsFactors = FALSE)
for(icol in 1:length(data2007)){
newdata[icol,] <- scw1[scw1$年份 == grep("2007",scw1$年份,value = TRUE)[icol],]
}
newdata <- newdata[1:len2007,]
View(newdata)
newdata$年份[1]
str(newdata)
edit(newdata)
View(newdata)
newdata$年份[1]
newdata$年份
as(newdata$年份,character
)
as(newdata$年份,charactor)
as.character(newdata$年份)
newdata$年份[1]
as.vector(newdata$年份)
newdata$年份[1]
as.vector.factor(newdata$年份)
newdata$年份[1]
len2007 <- length(data2007)
data2007 <- grep("2007",scw1$年份,value = TRUE)
newdata <- data.frame(scw1,stringsAsFactors = FALSE)
s <- list(newdata)
for(icol in 1:length(data2007)){
newdata[icol,] <- scw1[scw1$年份 == grep("2007",scw1$年份,value = TRUE)[icol],]
s[icol] <- unlist(strsplit(as.character(newdata$年份[icol]),'\\.'))[1]
}
s
newdata$年份 <- s
View(newdata)
newdata2 <- newdata
len2007 <- length(data2007)
data2007 <- grep("2007",scw1$年份,value = TRUE)
newdata <- data.frame(scw1,stringsAsFactors = FALSE)
s <- list(newdata)
for(icol in 1:length(data2007)){
newdata[icol,] <- scw1[scw1$年份 == grep("2007",scw1$年份,value = TRUE)[icol],]
s[icol] <- unlist(strsplit(as.character(newdata$年份[icol]),'\\.'))[1]
}
newdata <- newdata[1:len2007,]
s <- s[1:len2007]
View(newdata2)
s <- s[1:len2007]
s
newdata$年份 <- s
View(newdata)
newdata$year <- "2007"
View(newdata)
View(newdata)
newdata2 <- spread(newdata,年份)
newdata2 <- spread(newdata,newdata$年份)
newdata2 <- spread(newdata,年份)
newdata2 <- spread(newdata,年份,数据)
newdata2 <- spread(data = newdata,key = 年份,value = 数据)
View(res1)
View(res2)
newdata2 <- spread(data = res2,key = 年份,value = 数据)
res2$年份[1]
newdata$年份[1]
as.factor(newdata$年份)
as.character.factor(newdata$年份)
newdata <- cut(newdata)
newdata$年份 <- cut(x = newdata$年份)
newdata$年份 <- factor(newdata$年份)
class(newdata)
names(newdata)
list(names(newdata))
a <- data.frame(names(newdata),stringsAsFactors = FALSE)
View(a)
s
a <- data.frame(s,stringsAsFactors = FALSE)
class(s)
class(names(newdata))
a <- data.frame(list(names(newdata)),stringsAsFactors = FALSE)
list(names(newdata))
View(res1)
names(res1)
names(res1)[1:2]
a <- data.frame(names(res1)[1:2],stringsAsFactors = FALSE)
names(res1)[[1:2]]
names(res1)[1]
names(res1)[2]
names(res1)[1][2]
names(res1)[1]+names(res1)[2]
b <- list(names(res1)[1],names(res1)[2],s)
b
a <- data.frame(b,stringsAsFactors = FALSE)
View(a)
a <- data.frame(c(b),stringsAsFactors = FALSE)
View(a)
b <- list(c(names(res1)[1],names(res1)[2],s))
c
b
a <- data.frame(c(b),stringsAsFactors = FALSE)
View(a)
a[1]
a[1,]
a[1,] <- c(newdata[1],newdata[2],newdata$数据)
c(newdata[1],newdata[2],newdata$数据)
a[1,] <- c(newdata[1,1],newdata[1,2],newdata$数据)
View(a)
View(newdata)
a[1,] <- c(newdata[1,2],newdata[1,3],newdata$数据)
View(a)
View(newdata)
a[1,] <- c(newdata$证券代码[1],newdata$证券简称[1],newdata$数据)
View(a)
newdata$证券代码[1]
a[1,] <- c(as.character(newdata$证券代码[1]),as.character(newdata$证券简称[1]),newdata$数据)
View(a)
View(res2)
res1[res1[1] == grep("2007",res1$年份,value = TRUE),]
res1[res1[1] == grep("2007",res1[1],value = TRUE),]
grep("2007",res1[1],value = TRUE)
res1[1]
grep("2007",res1[1,],value = TRUE)
res1[1,]
grep("2007",names(res1),value = TRUE)
q <- grep("2007",names(res1),value = TRUE)
res1[q]
q1<-res1[q]
View(q1)
w <- grep("2008",names(res1),value = TRUE)
w1<-res1[2]
View(w1)
w1<-res1[w]
w1<-res1[c(res1[[1]],res1[[2]],w)]
res1[[1]]
res1$证券代码
w1<-res1[c(res1$证券代码,res1$证券简称,w)]
w1<-res1[c(list(res1$证券代码),list(res1$证券简称),w)]
list(res1$证券代码)
w1<-res1[c(证券代码,证券简称,w)]
w1<-res1[c("证券代码","证券简称",w)]
class(q1)
q1$nianfen <- 2007
q1$nianfen <- "2007"
View(q1)
w1$nianfen <- "2008"
View(q1)
View(w1)
names(q1)
names(w1)
q <- grep("2007",names(res1),value = TRUE)
q1<-res1[c("证券代码","证券简称",q)]
q1$nianfen <- "2007"
rbind(q1,w1)
rbind(q1,list(w1)
)
names(q1)
names(w1)
w1[,]
rbind(q1,w1[,])
rbind(q1,w1[:])
w1[[],]]
w1[[,]]
w1[[]]
w1[[:]]
w1$(c(names(w1)))
w1$c(names(w1))
w1$(names(w1))
w1$names(w1)
w1$names
w1[c(names(w1)]
w1[c(names(w1))]
w1[names(w1)]
rbind(q1,w1[names(w1)])
attach(w1)
w1
rbind(q1,w1
)
detach(w1)
w2 <- w1[w1,drop = TRUE]
w2 <- w1[]
rbind(q1,w2)
w1[1]
w1[,1]
w1[1,1]
w1[1,:]
w1[1]
w1[[1]]
w1[[,1]]
names(w1) <- NULL
View(w1)
View(w2)
View(w1)
w <- grep("2008",names(res1),value = TRUE)
w1<-res1[c("证券代码","证券简称",w)]
w1$nianfen <- "2008"
View(w1)
w1 = as.vector(w1)
names(w1) <- NULL
View(w1)
w1
rbind(q1,w1)
class(w1)
View(w1)
names(w1)
w1$
w
w1[1]
w1[2]
as.vector(w1)
class(w1)
as.matrix(w1)
rbind(q1,w1)
class(w1)
str(w1)
q <- grep("2007",names(res1),value = TRUE)
q1<-res1[q]
q1$nianfen <- "2007"
w <- grep("2008",names(res1),value = TRUE)
w1<-res1[w]
w1$nianfen <- "2008"
View(w1)
as.vector(w1)
rbind(q1,w1)
names(w1)
as.matrix(w1)
rbind(q1,w1)
rbind(q1,w1,deparse.level = 0)
rbind(q1,w1,deparse.level = 1)
rbind(q1,w1)
class(w1)
str(w1)
names(res1)
names(q1)
length(res1)
for(icol in 1:length(res1)){
s[icol] <- unlist(strsplit(as.character(res1$年份[icol]),'\\.'))[1]
}
s
icol <- 1
unlist(strsplit(as.character(res1$年份[icol]),'\\.'))[1]
unlist(strsplit(as.character(res1$年份[2]),'\\.'))[1]
unlist(strsplit(as.character(res1$年份[12]),'\\.'))[1]
unlist(strsplit(as.character(res1[12]),'\\.'))[1]
res1[1]
unlist(strsplit(as.character(names(res1)),'\\.'))[1]
for(icol in 1:length(res1)){
s[icol] <- unlist(strsplit(as.character(names(res1)[icol]),'\\.'))[1]
}
s
duplicated(s)
s[duplicated(s)]
s <- s[!duplicated(s)]
s
res3 <- data.frame(s)
View(res3)
names(res3) <- s
View(res3)
names(res3) <- c(s,"年份")
res3 <- data.frame(c(s,"年份"))
names(res3) <- c(s,"年份")
View(res3)
q <- grep("2007",names(res1),value = TRUE)
q1<-res1[c("证券代码","证券简称",q)]
q1$nianfen <- "2007"
s <- s[!duplicated(s)]
s <- c(s,"年份")
res3 <- data.frame(s)
names(res3) <- s
View(res3)
names(q1) <- s
w <- grep("2008",names(res1),value = TRUE)
w1<-res1[c("证券代码","证券简称",w)]
w1$nianfen <- "2008"
names(w1) <- s
cbind(res3,q1)
View(res3)
rbind(res3,q1)
q <- grep("2007",names(res1),value = TRUE)
q1<-res1[c("证券代码","证券简称",q)]
q1$nianfen <- "2007"
names(q1) <- s
w <- grep("2008",names(res1),value = TRUE)
w1<-res1[c("证券代码","证券简称",w)]
w1$nianfen <- "2008"
names(w1) <- s
rbind(q1,w1)
res3 <- rbind(q1,w1)
View(res3)
s <- s[!duplicated(s)]
s <- c(s,"年份")
res3 <- data.frame(s)
names(res3) <- s
View(res3)
res3 <- data.frame()
names(res3) <- s
res3 <- data.frame(s)
for(icol in 1:length(res1)){
s[icol] <- unlist(strsplit(as.character(names(res1)[icol]),'\\.'))[1]
}
s <- s[!duplicated(s)]
s <- c(s,"年份")
res3 <- data.frame(s)
names(res3) <- s
for(year in 2007:2014){
q <- grep(year,names(res1),value = TRUE)
q1<-res1[c("证券代码","证券简称",q)]
q1$年份 <- year
names(q1) <- s
res3 <- rbind(res3,q1)
}
View(res3)
2007:2014
year <- 2007
for(icol in 1:length(res1)){
s[icol] <- unlist(strsplit(as.character(names(res1)[icol]),'\\.'))[1]
}
s <- s[!duplicated(s)]
s <- c(s,"年份")
res3 <- data.frame(s)
names(res3) <- s
q <- grep(year,names(res1),value = TRUE)
q
q1<-res1[c("证券代码","证券简称",q)]
View(q1)
q1$年份 <- year
names(q1) <- s
res3 <- rbind(res3,q1)
View(res3)
res3 <- rbind(q1,w1)
View(res3)
res3 <- rbind(res3,w1)
res3 <- data.frame(s)
names(res3) <- s
res3 <- rbind(res3,w1)
View(res3)
res3 <- data.frame(s)
names(res3) <- s
res3[1]
res3[1,]
res3[1,]<-NULL
res3 <- res3[-1,]
res3 <- rbind(res3,w1)
View(res3)
for(icol in 1:length(res1)){
s[icol] <- unlist(strsplit(as.character(names(res1)[icol]),'\\.'))[1]
}
s <- s[!duplicated(s)]
s <- c(s,"年份")
res3 <- data.frame(s)
names(res3) <- s
res3 <- res3[-1,]
for(year in 2007:2014){
q <- grep(year,names(res1),value = TRUE)
q1<-res1[c("证券代码","证券简称",q)]
q1$年份 <- year
names(q1) <- s
res3 <- rbind(res3,q1)
}
View(res3)
res3 <- res3[order(res3$证券代码,res3$年份)]
View(res3)
res3 <- res3[order(res3$[[1]],res3[[14]])]
res3 <- res3[order(res3$[[1]],res3[[14]]),]
res3 <- res3[order(res3[[1]],res3[[14]]),]
View(res3)
write.xlsx(res3,"res3.xlsx")
res1 <- read.xlsx("2007-2014communication.xlsx",sheetIndex = 1,encoding = "UTF-8")
View(res1)
View(res1)
tail(res1,1)
tail(res1,1) <- NULL
res1 <- res1[-tail(res1,1)]
res1 <- res1[tail(res1,1)]
length(res1)
length(res1)[1]
length(res1)[2]
length(res1)[0]
nrow(res1)
res1 <- res1[-nrow(res1)]
View(res1)
View(res1,)
View(res1)
res1 <- res1[-nrow(res1),]
res1 <- res1[-3:-5]
res1 <- read.xlsx("2007-2014communication.xlsx",sheetIndex = 1,encoding = "UTF-8")
res1 <- res1[-nrow(res1),]
View(res1)
res1 <- res1[-3:-5]
for(icol in 1:length(res1)){
s[icol] <- unlist(strsplit(as.character(names(res1)[icol]),'\\.'))[1]
}
s <- s[!duplicated(s)]
s <- c(s,"年份")
res3 <- data.frame(s)
names(res3) <- s
res3 <- res3[-1,]
for(year in 2007:2014){
q <- grep(year,names(res1),value = TRUE)
q1<-res1[c("证券代码","证券简称",q)]
q1$年份 <- year
names(q1) <- s
res3 <- rbind(res3,q1)
}
res1 <- read.xlsx("2007-2014communication.xlsx",sheetIndex = 1,encoding = "UTF-8")
res1 <- res1[-nrow(res1),]
res1 <- res1[-3:-5]
for(icol in 1:length(res1)){
s[icol] <- unlist(strsplit(as.character(names(res1)[icol]),'\\.'))[1]
}
s <- s[!duplicated(s)]
s <- c(s,"年份")
s
res1 <- read.xlsx("2007-2014communication.xlsx",sheetIndex = 1,encoding = "UTF-8")
res1 <- res1[-nrow(res1),]
res1 <- res1[-3:-5]
View(res1)
res1 <- res1[-length(res1)]
View(res1)
for(icol in 1:length(res1)){
s[icol] <- unlist(strsplit(as.character(names(res1)[icol]),'\\.'))[1]
}
s <- s[!duplicated(s)]
s <- c(s,"年份")
s
res3 <- data.frame(s)
names(res3) <- s
res3 <- res3[-1,]
View(res3)
for(year in 2007:2014){
q <- grep(year,names(res1),value = TRUE)
q1<-res1[c("证券代码","证券简称",q)]
q1$年份 <- year
names(q1) <- s
res3 <- rbind(res3,q1)
}
View(res3)
res3 <- res3[order(res3[[1]],res3[[length(res3)]]),]
save.image("F:/study/statistic/alldata.RData")
